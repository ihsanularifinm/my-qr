<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MikroTik Hotspot - Secure QR Scanner</title>
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="../assets/qr-code.svg">
    <meta name="description" content="Secure QR Code Scanner for Hotspot Login">
    
    <!-- Custom Local CSS -->
    <link rel="stylesheet" href="../css/style.css">
    
    <!-- QR Library -->
    <script src="../js/html5-qrcode.min.js" type="text/javascript"></script>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white min-h-screen flex items-center justify-center p-4 transition-colors duration-300">

    <!-- Sticky Navbar with Toggle Buttons -->
    <header class="fixed top-0 w-full px-4 py-2 flex justify-end gap-2 bg-gray-100 dark:bg-gray-900 z-10">
		<!-- Language Toggle -->
		<button id="lang-toggle" type="button" class="text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none rounded-lg text-sm w-10 h-10 flex items-center justify-center cursor-pointer">
			<span id="lang-icon-en" class="font-bold text-xs">EN</span>
			<span id="lang-icon-id" class="hidden font-bold text-xs">ID</span>
		</button>
		<!-- Theme Toggle -->
		<button id="theme-toggle" type="button" class="text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none rounded-lg text-sm w-10 h-10 flex items-center justify-center cursor-pointer">
			<!-- Heroicons: Moon (solid) - for dark mode -->
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="hidden w-5 h-5" id="theme-toggle-dark-icon">
				<path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd" />
			</svg>
		<!-- Heroicons: Sun (solid) - for light mode -->
		<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="hidden w-5 h-5" id="theme-toggle-light-icon">
			<path d="M12 2.25a.75.75 0 0 1 .75.75v2.25a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75ZM7.5 12a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM18.894 6.166a.75.75 0 0 0-1.06-1.06l-1.591 1.59a.75.75 0 1 0 1.06 1.061l1.591-1.59ZM21.75 12a.75.75 0 0 1-.75.75h-2.25a.75.75 0 0 1 0-1.5H21a.75.75 0 0 1 .75.75ZM17.834 18.894a.75.75 0 0 0 1.06-1.06l-1.59-1.591a.75.75 0 1 0-1.061 1.06l1.59 1.591ZM12 18a.75.75 0 0 1 .75.75V21a.75.75 0 0 1-1.5 0v-2.25A.75.75 0 0 1 12 18ZM7.758 17.303a.75.75 0 0 0-1.061-1.06l-1.591 1.59a.75.75 0 0 0 1.06 1.061l1.591-1.59ZM6 12a.75.75 0 0 1-.75.75H3a.75.75 0 0 1 0-1.5h2.25A.75.75 0 0 1 6 12ZM6.697 7.757a.75.75 0 0 0 1.06-1.06l-1.59-1.591a.75.75 0 0 0-1.061 1.06l1.59 1.591Z" />
			</svg>
		</button>
	</header>

    <div class="w-full max-w-sm bg-white dark:bg-gray-800 backdrop-blur-xl rounded-3xl shadow-2xl border border-gray-200 dark:border-gray-700/50 p-5 text-center animate-fade-in-up relative overflow-hidden transition-colors duration-300">
        
        <!-- Back Button -->
        <a href="#" id="back-btn" class="absolute top-4 left-4 p-2 text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white bg-gray-200 dark:bg-gray-700/50 hover:bg-gray-300 dark:hover:bg-gray-700 rounded-full transition-all z-20" title="Back Home">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" />
            </svg>
        </a>
        
        <!-- Header -->
        <div class="mb-6 z-10 relative">
            <h2 class="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-400 dark:to-indigo-400" data-i18n="scan_qr_title">QR Scanner</h2>
            <p class="text-gray-500 dark:text-gray-400 text-sm mt-1" data-i18n="scan_subtitle">Scan QR or Upload QR Image</p>
        </div>

        <!-- Scanner / Placeholder Area -->
        <div class="relative w-full aspect-square bg-gray-100 dark:bg-gray-900/50 rounded-2xl overflow-hidden border-2 border-dashed border-gray-300 dark:border-gray-600 shadow-inner flex flex-col items-center justify-center group transition-all duration-300" id="scanner-wrapper">
             
             <!-- Icons for Placeholder -->
             <div id="placeholder-icon" class="text-gray-400 dark:text-gray-600 transition-opacity animate-pulse">
                <!-- Heroicons: qr-code -->
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-32 w-32 opacity-50">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5h.75v.75h-.75v-.75ZM13.5 19.5h.75v.75h-.75v-.75ZM19.5 13.5h.75v.75h-.75v-.75ZM19.5 19.5h.75v.75h-.75v-.75ZM16.5 16.5h.75v.75h-.75v-.75Z" />
                </svg>
             </div>
             
             <!-- The Scanner Element -->
             <div id="reader" class="w-full h-full absolute inset-0 hidden [&_video]:!w-full [&_video]:!h-full [&_video]:!object-cover [&_video]:!rounded-2xl [&_video]:!bg-transparent"></div>
        </div>

        <!-- Status Message -->
        <p id="status-msg" class="text-xs text-center text-gray-500 font-medium my-6 animate-pulse" data-i18n="scan_status_inactive">Camera is inactive</p>

        <!-- Controls -->
        <div class="space-y-3 z-10 relative">
            
            <!-- Toggle Camera Button -->
            <button id="toggle-camera-btn" class="w-full py-3 px-4 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white font-semibold rounded-xl transition-all duration-200 shadow-lg shadow-blue-900/20 transform hover:-translate-y-0.5 active:translate-y-0 flex items-center justify-center gap-2 cursor-pointer">
                <!-- Heroicons: video-camera -->
                <svg id="cam-icon-on" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z" />
                </svg>
                <span id="toggle-btn-text" data-i18n="btn_start_camera">Start Camera</span>
            </button>

            <!-- File Upload Button -->
            <input type="file" id="qr-input-file" accept="image/*" class="hidden !hidden">
            <button id="upload-btn" class="w-full py-3 px-4 bg-gray-200 dark:bg-gray-700/50 hover:bg-gray-300 dark:hover:bg-gray-700 text-gray-800 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white font-medium rounded-xl transition-all duration-200 border border-gray-400 dark:border-gray-600 border-dashed hover:border-gray-500 dark:hover:border-gray-500 flex items-center justify-center gap-2 cursor-pointer">
                <!-- Heroicons: photo -->
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z" />
                </svg>
                <span data-i18n="btn_upload_qr">Scan Image File</span>
            </button>
            
        </div>

    </div>

    <script src="js/app.js"></script>
    
    <style>
        .animate-fade-in-up { animation: fadeInUp 0.5s ease-out; }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Hide HTML5-QRCode Default Overlays if they pop up */
        #reader__dashboard_section_csr span { display: none !important; }
    </style>
    
    <!-- Custom Logic -->
    <script src="../js/app.js"></script>
</body>
</html>
